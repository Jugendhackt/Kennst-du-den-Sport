<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kennst du den Sport?</title>
    <link rel="stylesheet" href="CSS/main.css">
    <link rel="stylesheet" href="CSS/footer.css">
    <link rel="text/javascript" href="js/localstorage.js">
    <link rel="icon" type="image" sizes="16x16" href="image/balle-sport.png">
    <script>
       window.onload = function () {
        document.sports_kat = LoadCatagories();
        WriteToLocalStorage();
        LoadFromLocalStorage();
        PrintButtons();
        }

        //Daten aus der DB entgegen nehmen
        function LoadCatagories()
        {
            return JSON.parse('{{!kategorien}}');
            //console.log(categories);
        }

        function WriteToLocalStorage()
        {
            // beladen des LocalStorages
            localStorage.setItem('sport_kat_length', document.sports_kat.length);
            for (let i=0; i < document.sports_kat.length; ++i)
            {
                localStorage.setItem('sports_kat_'+i, document.sports_kat[i]);
            }
        }


        function LoadFromLocalStorage()
        {
            let sports_kat_length = localStorage.getItem('sport_kat_length'); //variable für die länge der Kategorien definieren
            let category_list = document.querySelector('.category_list');

            // console.log("länge der Kat: " + sports_kat_length);
            for (let i=0; i < sports_kat_length; ++i)
            {
                let kat_name = localStorage.getItem('sports_kat_'+i)
                // Ausgabe der Kategorien im HTML
                category_list.innerHTML = category_list.innerHTML + "\n" + `<button  class="button font" onclick="window.location.replace('/init?kategorie=${kat_name}')">${kat_name}</button>`
                // testweise ausgabe der Kategorien des
                console.log(`Kategorie ${i}: ${kat_name}`);
            }

        }


        function PrintButtons()
        {

            // Ausgabe der Kategorien im HTML
            //let sports_kat_length = localStorage.getItem('sport_kat_length')  //variable für die länge der Kategorien definieren
            for (let i=0; i < sports_kat_length; ++i)
            {
                let kat_name = localStorage.getItem('sports_kat_'+i)
                // Ausgabe der Kategorien im HTML
                category_list.innerHTML = category_list.innerHTML + "\n" + `<button  class="button font" onclick="window.location.href = '${kat_name}.html'">${kat_name}</button>`
                //document.write(`<button  class="button font" onclick="window.location.href = '${kat_name}.html'">${kat_name}</button>`);
            }
        }

    </script>
</head>
<body>
    <header>
        <h1>Kennst du den Sport?</h1>
    </header>
    <div class="category_list">
        <button  class="button font" onclick="window.location.replace('/init')">Alle</button>
    </div>
    <hr>
    <div class="">
        <div class="img">
            <img  src="/Frontend/image/Shutterstock_Lisa_Kolbasa.png">
        </div>
    </div>

    <footer>
        <h5>Entwickelt und gestaltet von Nora, Emma, Paul, Lene, Yannick</h5>
    </footer>
</body>
</html>